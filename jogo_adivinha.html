<!DOCTYPE html>
<html lang="pt-br">
<meta charset="UTF-8">
<link rel="stylesheet" href="style.css">

<body>                      

<h1> Projeto: Jogo "Adivinha"!</h1>

<script>                    // Inicio do programa em JavaScript

function pulaLinha() {      // Função para pular linha na pagina html
    document.write("<br><br>");
}

function mostra(conteudo) {  // Função para mostrar o conteúdo na pagina html
    document.write(conteudo);
    pulaLinha();
}

var tentativas, numeroSorteado, jogar, chute, quantidadeNumeros, numerosChutados = []; //Variáveis globais

function sortearNumero() {      // Função principal para sortear o número secreto baseado na quantidade de números escolhido.
    quantidadeNumeros = parseInt(prompt(`Digite a quantidade de numeros a ser sorteada: 5 a 100`));
    numeroSorteado = Math.round(Math.random() * quantidadeNumeros);  
    mostra("Número sorteado: " + numeroSorteado);
    tentativas = Math.round(quantidadeNumeros / 5);  // Define as a quantidade de tentativas que o usuério terá baseado 
                                                    // na quantidade de números escolhida pelo usuário
}

function jogarNovamente() { // Função para reiniciar o jogo - Pergunta se o usuário quer jogar novamente ao final do jogo ou encerrar.
    jogar = prompt(`Jogar novamente? Digite Sim ou Não `);
    if (jogar == "Sim" || jogar == "sim" || jogar == "1" || jogar == "s") {
        sortearNumero();        // Pergunta  quantidade de números e faz o sorteio.
        numerosChutados = [];   // Zera os números já chutados no jogo anterior.
        mostra(`Jogar novamente? Digite Sim ou Não: ${jogar}`);
    }
    else {
        tentativas = 0;
        mostra(`Jogar novamente? Digite Sim ou Não: ${jogar}`);
        alert(`OK! Obrigado por jogar esse jogo! \nAté a proxima!`)
        mostra(`OK! Obrigado por jogar esse jogo! \nAté a proxima!`);
    }
}
                        // Aqui começa o programa principal.  
sortearNumero();        // Pergunta  quantidade de números e faz o sorteio.
while (tentativas) {    // Laço principal que fará repetir todo o jogo até as tentativas acabar.!        
    chute = parseInt(prompt(`Tentativas restantes: ${tentativas} \nNúmeros já chutados: ${numerosChutados} \nDigite um número de 0 a ${quantidadeNumeros}: `));    
    mostra(`Tentativas restantes: ${tentativas} \nDigite um número de 0 a ${quantidadeNumeros}: `);
    mostra(`Número digitado: ${chute}`);
    let chuteRepetido = 0;
    for (let x = 0; x < numerosChutados.length; x++){       // Aqui testa se o número chutado já foi utilizado anteriormente
        if (chute == numerosChutados[x]) {
            chuteRepetido = 1;                              // Se positivo então o marca como repetido!
            alert(`Número já chutado anteriormente, tente outro!`)
            mostra(`Número já chutado anteriormente, tente outro!`)
        }
    }
    if (!chuteRepetido){                        // Se marcado como repetido então o programa não continua e voltamos ao laço principal.
        numerosChutados.push(chute);            // Coloca o numero chutado na lista de números chutados.
        if (chute == numeroSorteado) {          // Se acertou o chute parabeniza o usuário.
            alert(`Parabens!! \nVocê acertou o número secreto!! \nNúmeros chutados ${numerosChutados} \nNúmero secreto ${numeroSorteado} !!`);
            mostra(`Parabens!! \nVocê acertou o número secreto!! \nNúmeros chutados ${numerosChutados} \nNúmero secreto ${numeroSorteado} !!`);
            jogarNovamente();                   //chama a função para oferecer a opção de jogar novamente.
        }
        else {                                  // Se errou o chute então ...
            tentativas--;                       // Subtrai as tentativas devido errar o chute.
            if (!tentativas) {                  // Se esgotou as tentativas então encerra e revela o numero secreto.
                alert(`Você errou! \nAcabou o número de tentativas! \nNúmeros chutados ${numerosChutados} \nO número secreto era: ${numeroSorteado} !`);
                mostra(`Você errou! \nAcabou o número de tentativas! \nNúmeros chutados ${numerosChutados} \nO número secreto era: ${numeroSorteado} !`);
                jogarNovamente();               //chama a função para oferecer a opção de jogar novamente.
            }
            else {                              // Se não esgotou as tentativas...                            
                if (numeroSorteado > chute) {   // Então compara o informa que errou o chute e que o número secreto é maior que o chutado.
                    alert(`Você errou!  \nO número secreto é maior que ${chute}! \nTentativas restantes: ${tentativas}`);
                    mostra(`Você errou! \nO número secreto é maior que ${chute}! \nTentativas restantes: ${tentativas}`);
                }
                else {                          // Senão então informa que errou o chute e que o número secreto é menor que o chutado.
                    alert(`Você errou! \nO número secreto é menor que ${chute}! \nTentativas restantes: ${tentativas}`);
                    mostra(`Você errou! \nO número secreto é menor que ${chute}! \nTentativas restantes: ${tentativas}`);
                }
            }
        }            // Fim do laço quando erra o chute
    }                // Fim do laço chuteRepetido
}                    // Fim do laço principal;
</script>
</body>
